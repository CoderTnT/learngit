<!DOCTYPE html>
<!-- saved from url=(0029)#signin -->
<html lang="zh-CN" dropeffect="none" xmlns:th="http://www.thymeleaf.org" class="js is-AppPromotionBarVisible cssanimations csstransforms csstransitions flexbox no-touchevents no-mobile" style="">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <script type="text/javascript" async="" src="../scripts/za-0.1.1.min.js"></script>
    <script async="" src="../scripts/ga.js"></script>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="renderer" content="webkit"/>
    <meta http-equiv="X-ZA-Response-Id" content="46acde5c53db46f2806ccad726de9826"/>
    <title>首页</title>
    <meta name="apple-itunes-app" content="app-id=432274380"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

    <meta id="znonce" name="znonce" content="d3edc464cf014708819feffde7ddd01e"/>

    <link rel="stylesheet" href="../styles/index.css"/>
    <style>
        .zm-item-answer-author-info a.collapse {margin-top: 0}
    </style>

</head>
    <body class="zhi ">
    <div th:replace="head :: head">

    </div>

    <link rel="stylesheet" href="../styles/index.css"/>
    <link rel="stylesheet" href="../styles/detail.css"/>


    <div class="zg-wrap zu-main clearfix " role="main">
        <div class="zu-main-content">
            <div class="zu-main-content-inner">
                <div class="zg-section" id="zh-home-list-title">
                    <i class="zg-icon zg-icon-feedlist"></i>最新动态
                    <input type="hidden" id="is-topstory"/>
                    <span class="zg-right zm-noti-cleaner-setting" style="list-style:none">
                        <a href="" class="zg-link-gray-normal">
                            <i class="zg-icon zg-icon-settings"></i>设置</a></span>
                </div>
                <div class="inner" id="Tabs">
                    <a th:href="@{'/'}">全部</a>
                    <a th:href="@{'/?tab=rent'}">租房</a>
                    <a th:href="@{'/?tab=study'}">学习</a>
                </div>

                <div class="zu-main-feed-con navigable" data-feedtype="topstory" id="zh-question-list" data-widget="navigable" data-navigable-options="{&quot;items&quot;:&quot;&gt; .zh-general-list .feed-content&quot;,&quot;offsetTop&quot;:-82}">
                    <a href="javascript:;" class="zu-main-feed-fresh-button" id="zh-main-feed-fresh-button" style="display:none"></a>
                    <div id="js-home-feed-list" class="zh-general-list topstory clearfix" data-init="{&quot;params&quot;: {}, &quot;nodename&quot;: &quot;TopStory2FeedList&quot;}" data-delayed="true" data-za-module="TopStoryFeedList">

                        <tr th:each="vo : ${viewObjects}">

                        <div class="feed-item folding feed-item-hook feed-item-2
                        " feed-item-a="" data-type="a" id="feed-2" data-za-module="FeedItem" data-za-index="">
                            <meta itemprop="ZReactor" data-id="389034" data-meta="{&quot;source_type&quot;: &quot;promotion_answer&quot;, &quot;voteups&quot;: 4168, &quot;comments&quot;: 69, &quot;source&quot;: []}"/>
                            <div class="feed-item-inner">
                                <div class="avatar">
                                    <a th:title="${vo.map['user'].name}" data-tip="p$t$amuro1230" class="zm-item-link-avatar" target="_blank" href="">
                                        <img th:src="${vo.map['user'].headUrl}" class="zm-item-img-avatar"/></a>
                                </div>


                                <div class="feed-main">
                                    <div class="feed-content" data-za-module="AnswerItem">
                                        <meta itemprop="answer-id" content="389034"/>
                                        <meta itemprop="answer-url-token" content="13174385"/>
                                        <h2 class="feed-title">
                                            <a class="question_link" target="_blank" th:href="@{'/question/'+${vo.map['question'].id}}"><td th:text="${vo.map['question'].title}"></td></a></h2>

                                        <div class="feed-question-detail-item">
                                            <div class="question-description-plain zm-editable-content"></div>
                                        </div>


                                        <div class="expandable entry-body">


                                            <div class="zm-item-vote">
                                                <a class="zm-item-vote-count js-expand js-vote-count" href="javascript:;" data-bind-votecount="" th:text="${vo.map['followerCount']}"></a>
                                            </div>


                                            <div class="zm-item-answer-author-info">
                                                <a class="author-link" data-tip="p$b$amuro1230" target="_blank" th:href="@{'/user/'+${vo.map['user'].id}}" th:text="${vo.map['user'].name}"></a>
                                                ，<td th:text="${#dates.format(vo.map['question'].createdDate,'yyyy-MM-dd HH:mm:ss')}"></td>
                                            </div>




                                            <div class="zm-item-vote-info" data-votecount="4168" data-za-module="VoteInfo">
                                                <span class="voters text">
                                                    <a href="#" class="more text">
                                                        <span class="js-voteCount">4168</span>&nbsp;人赞同</a></span>
                                            </div>


                                            <div class="zm-item-rich-text expandable js-collapse-body" data-resourceid="123114" data-action="/answer/content" data-author-name="李淼" data-entry-url="/question/19857995/answer/13174385">

                                                <div class="zh-summary summary clearfix">

                                                    <td th:text="${vo.map['question'].content}"></td>
                                                </div>

                                            </div>
                                        </div>
                                        <div class="feed-meta">
                                            <div class="zm-item-meta answer-actions clearfix js-contentActions">
                                                <div class="zm-meta-panel">
                                                    <a data-follow="q:link" class="follow-link zg-follow meta-item" href="javascript:;" id="sfb-123114">
                                                        <i class="z-icon-follow"></i>关注问题</a>
                                                    <a href="#" name="addcomment" class="meta-item toggle-comment js-toggleCommentBox" >
                                                        <i class="z-icon-comment" ></i><span th:text="${vo.map['question'].commentCount}"></span>条评论</a>


                                                    <button class="meta-item item-collapse js-collapse">
                                                        <i class="z-icon-fold"></i>收起</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>

                        </tr>


                    </div>
                    <div class="js-blog-list"></div>
                    <a href="javascript:;" onclick="aclick()" id="zh-load-more" data-method="next" class="zg-btn-white zg-r3px zu-button-more" style="">更多</a>






                </div>
            </div>
        </div>
    </div>
    <!--<script type="text/javascript" src="/scripts/main/jquery-3.3.1.min.js"></script>-->

    <script src="http://libs.baidu.com/jquery/1.11.3/jquery.min.js"></script>

    <script type='text/javascript'>


        $(function() {
            /*初始化*/
            var counter = 0;
            var pageStart=0;
            var pageSize=10;


            /*首次加载*/

            getData(pageStart,pageSize);

            $(document).on('click','#zh-load-more',function () {

                counter++;
                pageStart=counter*pageSize;

                getData(pageStart,pageSize);
            })

        });

//        function aclick() {
//
//            alert('这是 click');
//
////            counter++;
////            pageStart=counter*pageSize;
////            getData(pageStart,pageSize);
//        }


        function getUrlArgStr(){
            var url = location.search; //获取url中"?"符后的字串

            return url;

        }

        function getData(offset,size) {

            if(offset ==0){
                return;
            }

           var urlparam = getUrlArgStr();

            var urls;

            if(urlparam != null){
                urls = '/more'+urlparam;
            }else{
                urls = '/more';
            }


            $.ajax({
                type:'GET',
                url:urls,
                data:{offset:offset,size:size},
                dataType:'json',
                success:function (reponse) {

                    var data = reponse;
                    var sum = reponse.length;
                    var result='';


                    if(sum==0){
                        alert("已经到底啦！")
                    }

                    var i = 0;

                   // alert('i :'+i+","+"offset:"+offset+" ,sum: "+sum)

                    for(;i!=(sum); i++){

                     //   result+='WWWWWW'+data[i].map.question.content;


                  //      alert(data[i].map.question.title);

                        var da = data[i].map.question.createdDate;
                        da = new Date(da);
                        var year = da.getFullYear()+'-';
                        var month = da.getMonth()+1+'-';
                        var date = da.getDate()+'  ';
                        var hours = da.getHours()+':';
                        var min = da.getMinutes()+':';
                        var mill = da.getMilliseconds();
//                        console.log([year,month,date].join('-'));
                       // alert(year+month+date+hours+min+mill);


                        result+='    <div class="feed-item folding feed-item-hook feed-item-2\n' +
                            '                        " feed-item-a="" data-type="a" id="feed-2" data-za-module="FeedItem" data-za-index="">\n' +
                            '                            <meta itemprop="ZReactor" data-id="389034" data-meta="{&quot;source_type&quot;: &quot;promotion_answer&quot;, &quot;voteups&quot;: 4168, &quot;comments&quot;: 69, &quot;source&quot;: []}"/>\n' +
                            '                            <div class="feed-item-inner">\n' +
                            '                                <div class="avatar">\n' +
                            '                                    <a title="'+data[i].map.user.name +'" data-tip="p$t$amuro1230" class="zm-item-link-avatar" target="_blank" href="">\n' +
                            '                                        <img src="'+data[i].map.user.headUrl+'" class="zm-item-img-avatar"/></a>\n' +
                            '                                </div>\n' +
                            '\n' +
                            '\n' +
                            '                                <div class="feed-main">\n' +
                            '                                    <div class="feed-content" data-za-module="AnswerItem">\n' +
                            '                                        <meta itemprop="answer-id" content="389034"/>\n' +
                            '                                        <meta itemprop="answer-url-token" content="13174385"/>\n' +
                            '                                        <h2 class="feed-title">\n' +
                            '                                            <a class="question_link" target="_blank" href="/question/'+data[i].map.question.id+'">'+data[i].map.question.title+'</a></h2>\n' +
                            '\n' +
                            '                                        <div class="feed-question-detail-item">\n' +
                            '                                            <div class="question-description-plain zm-editable-content"></div>\n' +
                            '                                        </div>\n' +
                            '\n' +
                            '\n' +
                            '                                        <div class="expandable entry-body">\n' +
                            '\n' +
                            '\n' +
                            '                                            <div class="zm-item-vote">\n' +
                            '                                                <a class="zm-item-vote-count js-expand js-vote-count" href="javascript:;" data-bind-votecount="" >'+data[i].map.followerCount+'</a>\n' +
                            '                                            </div>\n' +
                            '\n' +
                            '\n' +
                            '                                            <div class="zm-item-answer-author-info">\n' +
                            '                                                <a class="author-link" data-tip="p$b$amuro1230" target="_blank" href="/user/'+data[i].map.user.id+'" >'+data[i].map.user.name+'</a>\n' +
                            '                                                ,'+year+month+date+hours+min+mill+'\n' +
                            '                                            </div>\n' +
                            '\n' +
                            '\n' +
                            '\n' +
                            '\n' +
                            '                                            <div class="zm-item-vote-info" data-votecount="4168" data-za-module="VoteInfo">\n' +
                            '                                                <span class="voters text">\n' +
                            '                                                    <a href="#" class="more text">\n' +
                            '                                                        <span class="js-voteCount">4168</span>&nbsp;人赞同</a></span>\n' +
                            '                                            </div>\n' +
                            '\n' +
                            '\n' +
                            '                                            <div class="zm-item-rich-text expandable js-collapse-body" data-resourceid="123114" data-action="/answer/content" data-author-name="李淼" data-entry-url="/question/19857995/answer/13174385">\n' +
                            '\n' +
                            '                                                <div class="zh-summary summary clearfix">\n' +
                            '\n' +
                            '                                                    '+data[i].map.question.content+'\n' +
                            '                                                </div>\n' +
                            '\n' +
                            '                                            </div>\n' +
                            '                                        </div>\n' +
                            '                                        <div class="feed-meta">\n' +
                            '                                            <div class="zm-item-meta answer-actions clearfix js-contentActions">\n' +
                            '                                                <div class="zm-meta-panel">\n' +
                            '                                                    <a data-follow="q:link" class="follow-link zg-follow meta-item" href="javascript:;" id="sfb-123114">\n' +
                            '                                                        <i class="z-icon-follow"></i>关注问题</a>\n' +
                            '                                                    <a href="#" name="addcomment" class="meta-item toggle-comment js-toggleCommentBox" >\n' +
                            '                                                        <i class="z-icon-comment" ></i><span text="'+data[i].map.question.commentCount+'"></span>条评论</a>\n' +
                            '\n' +
                            '\n' +
                            '                                                    <button class="meta-item item-collapse js-collapse">\n' +
                            '                                                        <i class="z-icon-fold"></i>收起</button>\n' +
                            '                                                </div>\n' +
                            '                                            </div>\n' +
                            '                                        </div>\n' +
                            '                                    </div>\n' +
                            '                                </div>\n' +
                            '                            </div>\n' +
                            '\n' +
                            '                        </div>'









                    }


                    $('.js-blog-list').append(result);
//
//                    if ( (offset + size) &gt;= sum){
//                        $(".js-load-more").hide();
//                    }else{
//                        $(".js-load-more").show();
//                    }

                },
                error:function (xhr,type) {
                    alert('Ajax error!');
                }
            })

        }

    </script>



    <script type="text/javascript" src="/scripts/main/jquery.js"></script>
    <script type="text/javascript" src="/scripts/main/base/base.js"></script>
    <script type="text/javascript" src="/scripts/main/base/util.js"></script>
    <script type="text/javascript" src="/scripts/main/base/event.js"></script>
    <script type="text/javascript" src="/scripts/main/util/action.js"></script>
    <script type="text/javascript" src="/scripts/main/component/component.js"></script>
    <script type="text/javascript" src="/scripts/main/component/popup.js"></script>
    <script type="text/javascript" src="/scripts/main/component/popupAdd.js"></script>
    <script type="text/javascript" src="/scripts/main/component/popupMsg.js"></script>
    <script type="text/javascript" src="/scripts/main/site/home.js"></script>
    <script type="text/javascript" src="/scripts/main/site/detail.js"></script>
    </body></html>